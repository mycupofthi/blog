<style>
.carousel {
  padding:0;
  margin:100px auto;
}
  .carousel a:hover {
    text-decoration:none;
  }
  .bx-wrapper {
    position:relative;
    margin:0 auto;
  }
    .bx-prev,
    .bx-next {
      position:absolute;
      top:37.7%;
    }
      .bx-prev {
        left:1%;
      }
      .bx-next {
        right:1%;
      }
        .bx-prev img,
        .bx-next img {
          max-width:55px;
          width:2.865vw;
        }

    .card {
      max-width:585px;
      width:30.469vw;
    }
      .card img {
        width:100%;
      }
      .card .banner__copy-container {
        position:relative;
        margin: 50px auto 0;
        text-align: left;
        max-width:385px;
        width:20.052vw;
      }
        .card .banner__caption-title {
          font-family:'Miller Banner Light', 'Miller Display Light', Arial, Helvetica, sans-serif;
          font-size:35px;
          line-height:1.29;
          letter-spacing:0;
          text-transform:none;
        }
            .card .banner__caption-title:after {
              display: inline;
              content: "";
              padding-left: 7px;
              margin-left: 10px;
              background: url(//static.indigoimages.ca/2017/triangle-cta.svg);
              background-position: center;
              background-repeat: no-repeat;
            }

@media (max-width:1920px) {
  .carousel {
    margin:5.208vw auto;
  }
    .card .banner__copy-container {
      margin:2.604vw auto 0;
    }
    .card .banner__caption-title {
      font-size:1.823vw;
    }
}


@media (max-width:675px) {
  .carousel {
    margin:15.625vw auto;
    padding: 0;
    position:relative;
  }
    .carousel:before {
      content: '';
      height: 1px;
      width: 84.375vw;
      background: black;
      position: absolute;
      top: -15.625vw;
      left: 50%;
      transform: translateX(-50%);
    }
    .bx-prev,
    .bx-next {
      top:29%;
      display:none;
    }
      .bx-prev img,
      .bx-next img {
        width:80%;
      }
    .card {
      width:46.875vw;
    }
      .card:last-of-type {
        display:none;
      }
      .card .banner__copy-container {
        width:31.250vw;
        margin:9.375vw auto 0;
      }
        .card .banner__caption-title {
          font-size:3.712vw;
        }
          .card .banner__caption-title:after {
            margin-left:1.563vw;
          }
}

@media (max-width:425px) {
  .card .banner__caption-title:after {
    margin-left:1.05vw;
  }
}
</style> 

<section class="carousel">
  <div class="bxslider-test"></div>
</section>

<script>
"use strict";

var blogPosts = [
// USE BELOW CODE AS TEMPLATE FOR FUTURE BLOG POSTS
//   please take care in separating each object with a comma
//   {
//     imgURL: "",
//     linkURL: "",
//     postTitle: ""
//   }
{
  imgURL: "https://static.indigoimages.ca/2019/585x585_blog_spa.jpg",
  linkURL: "/inspired/wellness/spa-day",
  postTitle: "How to Create a Spa Day at Home "

}, {
  imgURL: "https://static.indigoimages.ca/2019/585x585_blog_salmonrecipe.jpg",
  linkURL: "/inspired/food-entertaining/salmon-recipe",
  postTitle: "Recipe: Orange Honey Salmon"
}, {
  imgURL: "https://static.indigoimages.ca/2019/585x585_blog_author_annie.jpg",
  linkURL: "/inspired/books/Annie-Leibovitz",
  postTitle: "5 Life Lessons with Annie Leibovitz"
}, {
  imgURL: "https://static.indigoimages.ca/2019/585x585_blog_10books.jpg",
  linkURL: "/inspired/books/10-books",
  postTitle: "Shelf Life: 10 Books by Badass Moms"
}, {
  imgURL: "https://static.indigoimages.ca/2019/585x585_blog_typesofmom.jpg",
  linkURL: "/inspired/gifting/types-of-mom",
  postTitle: "Mother's Day Gift Ideas for Every Type of Mom"
}, {
  imgURL: "https://static.indigoimages.ca/2019/585x585_blog_lettertomom.jpg",
  linkURL: "/inspired/gifting/letters-to-mom",
  postTitle: "How to Master the Art of Letter Writing"
}, {
  imgURL: "https://static.indigoimages.ca/2019/585x585_blog_curated_mattnat.jpg",
  linkURL: "/inspired/style-design/matt-and-nat",
  postTitle: "Curated by Indigo: Matt & Nat"
}, {
  imgURL: "https://static.indigoimages.ca/2019/585x585_blog_chefsouschef.jpg",
  linkURL: "/inspired/food-entertaining/blueberry-french-toast",
  postTitle: "In the Kitchen with Chef Sous Chef"
}, {
  imgURL: "https://static.indigoimages.ca/2019/585x585_blog_baby.jpg",
  linkURL: "/inspired/family/nursery-decor",
  postTitle: "How to Create a Calming Baby Nursery"
}, {
  imgURL: "https://static.indigoimages.ca/2019/585_585_blog_curated_magnolia.jpg",
  linkURL: "/inspired/style-design/joanna-gaines",
  postTitle: "Curated by Indigo: Magnolia Home by Joanna Gaines"
}, {
  imgURL: "https://static.indigoimages.ca/2019/585x585_blog_crystal.jpg",
  linkURL: "/inspired/wellness/crystals",
  postTitle: "4 Ways Crystals Can Improve Your Life"
}];

// initialize empty array
var adjustedBP = [];

// map through original array
blogPosts.map(function (d) {

  // if the current url does not match object linkURL, add to adjusted array
  if (window.location.href.indexOf(d.linkURL) === -1) {
    adjustedBP.push(d);
  }
});

// shuffle adjusted array
function shuffle(array) {
  var i = 0,
      j = 0,
      temp = null;

  for (i = array.length - 1; i > 0; i -= 1) {
    j = Math.floor(Math.random() * (i + 1));
    temp = array[i];
    array[i] = array[j];
    array[j] = temp;
  }
}

shuffle(adjustedBP);

var blogURL = void 0,
    blogImg = void 0,
    blogTitle = void 0;

// append card to bxslider
function appendCard() {

  // markup for individual card
  var bxslider = document.querySelector('.bxslider-inspire');

  for (var i = 0; i <= 9; i++) {

    blogURL = adjustedBP[i].linkURL;
    blogImg = adjustedBP[i].imgURL;
    blogTitle = adjustedBP[i].postTitle;

    var markup = "<a href=\"" + blogURL + "\" class=\"card__link\">\n      <img src=\"" + blogImg + "\" class=\"card__image\">\n      <div class=\"banner__copy-container\">\n        <h2 class=\"banner__caption-title\">" + blogTitle + "</h2>\n      </div>\n    </a>";

    var cardIndex = i;

    // create card container, add the markup  and append to bxslider
    var cardContainer = document.createElement('div');
    cardContainer.className = 'card';
    cardContainer.id = cardIndex;
    cardContainer.innerHTML = markup;
    bxslider.appendChild(cardContainer);
  }
}

appendCard();

prerequire.add(['jquery'], function ($) {
  $(function () {
    var $slider = void 0;

    // bxslider config settings
    function buildSliderConfig() {
      var windowWidth = $(window).width();
      var margin = void 0;

      // card margin settings based on viewport
      if (windowWidth <= 675) {
        margin = 0.0625 * windowWidth;
      } else if (windowWidth < 1920) {
        margin = 0.04 * windowWidth;
      } else if (windowWidth >= 1920) {
        margin = 82.5;
      }

      return {
        pager: false,
        slideWidth: windowWidth <= 675 ? 316.4 : 585,
        slideMargin: margin,
        maxSlides: windowWidth <= 675 ? 2 : 3,
        minSlides: windowWidth <= 675 ? 2 : 3,
        moveSlides: windowWidth <= 675 ? 2 : 3,
        nextText: '<img src="https://static.indigoimages.ca/2019/next.png">',
        prevText: '<img src="https://static.indigoimages.ca/2019/previous.png">'
      };
    }

    // initialize and reload slider behaviour
    function configureSlider() {
      var config = buildSliderConfig();

      // if the slider is reloaded, reload config
      if ($slider && $slider.reloadSlider) {
        $slider.reloadSlider(config);

        // else initialize slider
      } else {
        $slider = $('.bxslider-inspire').bxSlider(config);
      }
    }

    // if the orientation changes or he window is resized, change config settings
    $(window).on('orientationchange resize', _.debounce(configureSlider));

    // init 
    configureSlider();
  });
});
</script>
